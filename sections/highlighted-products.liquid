<!-- Section: Highlighted Products -->
{% stylesheet %}
  /* Add your custom styles here. */
  .highlighted-products {
    background-color: {{ section.settings.background_color }};
  }
  .highlighted-products__title {
    color: {{ section.settings.text_color }};
  }
  /* Additional styles for swiper if not using Dawn's built-in slider */
{% endstylesheet %}

<div class='highlighted-products page-width'>
  <h2 class='highlighted-products__title'>{{ section.settings.title }}</h2>
  <p class='highlighted-products__subtext'>{{ section.settings.subtext }}</p>
  <!-- Product Slider -->
  <div class='highlighted-products__slider'>
    {% for block in section.blocks %}
      {% if block.type == 'product_variant' %}
        {% assign selected_product = block.settings.product %}
        {% assign selected_variant_id = block.settings.variant_id | plus: 0 %}

        {% assign variant_found = false %}
        {% for variant in selected_product.variants %}
          {% if variant.id == selected_variant_id %}
            {% assign variant_found = true %}

            {% for i in (1..10) %}
              {% capture image_setting %}image_{{ i }}{% endcapture %}
              {% if block.settings[image_setting] %}
                <img src='{{ block.settings[image_setting] | img_url }}' alt='Image {{ i }}'>
              {% endif %}
            {% endfor %}

            <h2>Variant Title: {{ variant.title }}</h2>
            <p>Price: {{ variant.price | money_with_currency }}</p>
            <p>SKU: {{ variant.sku }}</p>
            <!-- Add more properties as needed -->
            {% break %}
          {% endif %}
        {% endfor %}

        {% unless variant_found %}
          <p>Variant not found 1.</p>
        {% endunless %}
      {% endif %}
    {% endfor %}
  </div>
  <!-- Initialize slider using Dawn's built-in slider or SwiperJS -->
  <script>
    // Your slider initialization code here
  </script>
</div>

{% schema %}
{
  "name": "Highlighted Products",
  "tag": "section",
  "class": "highlighted-products-section",
  "max_blocks": 9,
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Featured Products"
    },
    {
      "type": "textarea",
      "id": "subtext",
      "label": "Subtext",
      "default": "Check out our featured products!"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    }
  ],
  "blocks": [
    {
      "type": "product_variant",
      "name": "Product Variant Block",
      "settings": [
        {
          "type": "header",
          "content": "Product Variant Block"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Please select the product which the variant belongs to."
        },
        {
          "type": "text",
          "id": "variant_id",
          "label": "Variant ID",
          "info": "Enter the variant ID here."
        },
        {
          "type": "text",
          "id": "custom_varient_title",
          "label": "Custom Varient Title",
          "default": "1 Month Supply"
        },
        {
          "type": "textarea",
          "id": "custom_description",
          "label": "Custom Description",
          "default": "This is a great product!"
        },
        {
          "type": "header",
          "content": "Custom Variant Images"
        },
        {
          "type": "paragraph",
          "content": "As we can't use all the images from the product as this will include images of all the varients we will add images we want to display in the carousel below instead. Upload up to 10 images for this variant."
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image 1"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image 2"
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image 3"
        },
        {
          "type": "image_picker",
          "id": "image_4",
          "label": "Image 4"
        },
        {
          "type": "image_picker",
          "id": "image_5",
          "label": "Image 5"
        },
        {
          "type": "image_picker",
          "id": "image_6",
          "label": "Image 6"
        },
        {
          "type": "image_picker",
          "id": "image_7",
          "label": "Image 7"
        },
        {
          "type": "image_picker",
          "id": "image_8",
          "label": "Image 8"
        },
        {
          "type": "image_picker",
          "id": "image_9",
          "label": "Image 9"
        },
        {
          "type": "image_picker",
          "id": "image_10",
          "label": "Image 10"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Highlighted Products",
      "category": "Custom",
      "blocks": [
        {
          "type": "product_variant"
        }
      ]
    }
  ]
}
{% endschema %}
