{%- style -%}
  .comparison-table-section {
    --section-padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .comparison-table-section {
      --section-padding-top: {{ section.settings.padding_top }}px;
      --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .comparison-table {
    border-collapse: separate;
    border-spacing: 0;
  }

  .comparison-table th:first-child,
  .comparison-table td:first-child {
    position: sticky;
    left: 0;
    z-index: 10;
    background: white;
  }

  .comparison-table th:nth-child(2),
  .comparison-table td:nth-child(2) {
    position: sticky;
    left: 100px;
    z-index: 9;
    background: {{ section.settings.highlight_color | default: '#F6F9FE' }};
  }

  .comparison-table th:first-child {
    z-index: 11;
  }

  .comparison-table th:nth-child(2) {
    z-index: 10;
  }

  .feature-check {
    color: {{ section.settings.check_color | default: '#22c55e' }};
    font-size: 1.5rem;
    font-weight: bold;
  }

  .feature-cross {
    color: {{ section.settings.cross_color | default: '#ef4444' }};
    font-size: 1.5rem;
    font-weight: bold;
  }

  .comparison-scroll-container {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .comparison-scroll-container::-webkit-scrollbar {
    display: none;
  }

  .comparison-header-image {
    max-height: {{ section.settings.header_image_height }}px;
    width: auto;
    object-fit: contain;
  }

  .comparison-footnote {
    font-size: 0.75rem;
    color: #6b7280;
    margin-bottom: 6px;
  }

  @media (min-width: 768px) {
    .comparison-footnote {
      font-size: 0.875rem;
    }
  }

  /* Gradient fade on the right side for mobile */
  .comparison-fade-right {
    background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,1));
  }

  @media (min-width: 1280px) {
    .comparison-fade-right {
      display: none !important;
    }
  }
{%- endstyle -%}

{%- liquid
  assign comparison_data = product.metafields.custom.comparison_table.value
  assign section_header = null
  assign table_header = null

  if comparison_data == blank
    assign show_section = false
  else
    assign show_section = true
  endif
-%}

{%- if show_section -%}
  {%- comment -%} Parse the comparison data {%- endcomment -%}
  {%- for item in comparison_data -%}
    {%- if item.header != blank or item.sub_paragraph != blank -%}
      {%- assign section_header = item -%}
    {%- elsif item.our_brand_name != blank -%}
      {%- assign table_header = item -%}
    {%- endif -%}
  {%- endfor -%}

  {%- liquid
    assign competitor_1_title = table_header.competitor_1_title
    assign competitor_2_title = table_header.competitor_2_title
    assign competitor_3_title = table_header.competitor_3_title
    assign competitor_4_title = table_header.competitor_4_title

    assign total_columns = 2
    if competitor_1_title != blank
      assign total_columns = total_columns | plus: 1
    endif
    if competitor_2_title != blank
      assign total_columns = total_columns | plus: 1
    endif
    if competitor_3_title != blank
      assign total_columns = total_columns | plus: 1
    endif
    if competitor_4_title != blank
      assign total_columns = total_columns | plus: 1
    endif
  -%}

  <div class='comparison-table-section color-{{ section.settings.color_scheme }} gradient'>
    <div class='tw-relative'>
      <div class='lg:tw-px-8 tw-py-8 lg:tw-py-12 tw-overflow-x-clip'>
        {%- comment -%} Section Header {%- endcomment -%}
        {%- if section_header -%}
          <div class='max-lg:tw-px-4 tw-mx-auto tw-flex tw-w-full tw-flex-col tw-gap-2 xl:tw-max-w-[1080px] 2xl:tw-max-w-[1125px] tw-mb-6 lg:tw-mb-9 tw-text-center tw-items-center'>
            {%- if section_header.header != blank -%}
              <h2 class='tw-text-3xl tw-font-bold {{ section.settings.header_alignment }}'>
                {{ section_header.header }}
              </h2>
            {%- endif -%}
            {%- if section_header.sub_paragraph != blank -%}
              <div class='tw-text-lg tw-text-gray-600 tw-max-w-3xl {{ section.settings.header_alignment }}'>
                {{ section_header.sub_paragraph | metafield_tag }}
              </div>
            {%- endif -%}
          </div>
        {%- endif -%}

        <div class='tw-mx-auto tw-max-w-[1200px]'>
          <div class='tw-relative'>
            {%- comment -%} Gradient fade on the right {%- endcomment -%}
            <div
              class='comparison-fade-right tw-pointer-events-none tw-absolute tw-right-0 tw-top-0 tw-z-10 tw-block tw-h-full tw-w-6 md:tw-w-10 xl:tw-hidden xl:tw-w-60 2xl:tw-w-80'
            ></div>

            {%- comment -%} Scrollable table container {%- endcomment -%}
            <div class='comparison-scroll-container tw-overflow-x-auto tw-mx-auto xl:tw-max-w-[1080px] 2xl:tw-max-w-[1125px]'>
              <table class='comparison-table tw-mb-6 tw-table-auto tw-border-separate' cellspacing='0'>
                {%- comment -%} Table Header {%- endcomment -%}
                <thead>
                  <tr class='tw-border-0 tw-p-0'>
                    {%- comment -%} Empty header cell for features column {%- endcomment -%}
                    <th class='tw-sticky tw-left-0 tw-z-10 tw-border-0 tw-bg-white tw-p-0 !tw-table-cell'></th>

                    {%- comment -%} Our Brand Column Header {%- endcomment -%}
                    <th
                      class='tw-sticky tw-left-[100px] tw-z-10 tw-p-0'
                      style='background: {{ section.settings.highlight_color | default: '#F6F9FE' }};'
                    >
                      {%- if section.settings.brand_column_border -%}
                        <div
                          class='tw-absolute tw-inset-0 tw-rounded-t-lg tw-border tw-border-b-0'
                          style='border-color: {{ section.settings.brand_border_color | default: '#3369FF' }};'
                        ></div>
                      {%- endif -%}
                      <div class='tw-min-w-[82px] tw-px-[6px] tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                        <div class='tw-mx-auto tw-max-w-[100px]'>
                          {%- if table_header.our_brand_logo != blank -%}
                            {{
                              table_header.our_brand_logo
                              | image_url: width: 200
                              | image_tag:
                                class: 'comparison-header-image tw-mx-auto',
                                alt: table_header.our_brand_name,
                                loading: 'lazy'
                            }}
                          {%- endif -%}
                          {%- if table_header.our_brand_name != blank -%}
                            <div class='tw-font-bold tw-text-xs tw-mt-1 tw-text-center'>
                              {{ table_header.our_brand_name }}
                            </div>
                          {%- endif -%}
                          {%- if table_header.our_brand_subtitle != blank -%}
                            <div class='tw-text-xs tw-text-gray-500 tw-text-center'>
                              {{ table_header.our_brand_subtitle }}
                            </div>
                          {%- endif -%}
                        </div>
                      </div>
                    </th>

                    {%- comment -%} Competitor Column Headers {%- endcomment -%}
                    {%- if competitor_1_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-[6px] tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_1_logo != blank -%}
                              {{
                                table_header.competitor_1_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_1_title,
                                  loading: 'lazy'
                              }}
                            {%- endif -%}
                            <div class='tw-font-bold tw-text-xs tw-mt-1 tw-text-center'>{{ competitor_1_title }}</div>
                            {%- if table_header.competitor_1_subtitle != blank -%}
                              <div class='tw-text-xs tw-text-gray-500 tw-text-center'>
                                {{ table_header.competitor_1_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}

                    {%- if competitor_2_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-[6px] tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_2_logo != blank -%}
                              {{
                                table_header.competitor_2_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_2_title,
                                  loading: 'lazy'
                              }}
                            {%- endif -%}
                            <div class='tw-font-bold tw-text-xs tw-mt-1 tw-text-center'>{{ competitor_2_title }}</div>
                            {%- if table_header.competitor_2_subtitle != blank -%}
                              <div class='tw-text-xs tw-text-gray-500 tw-text-center'>
                                {{ table_header.competitor_2_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}

                    {%- if competitor_3_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-[6px] tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_3_logo != blank -%}
                              {{
                                table_header.competitor_3_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_3_title,
                                  loading: 'lazy'
                              }}
                            {%- endif -%}
                            <div class='tw-font-bold tw-text-xs tw-mt-1 tw-text-center'>{{ competitor_3_title }}</div>
                            {%- if table_header.competitor_3_subtitle != blank -%}
                              <div class='tw-text-xs tw-text-gray-500 tw-text-center'>
                                {{ table_header.competitor_3_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}

                    {%- if competitor_4_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-[6px] tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_4_logo != blank -%}
                              {{
                                table_header.competitor_4_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_4_title,
                                  loading: 'lazy'
                              }}
                            {%- endif -%}
                            <div class='tw-font-bold tw-text-xs tw-mt-1 tw-text-center'>{{ competitor_4_title }}</div>
                            {%- if table_header.competitor_4_subtitle != blank -%}
                              <div class='tw-text-xs tw-text-gray-500 tw-text-center'>
                                {{ table_header.competitor_4_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}
                  </tr>
                </thead>

                {%- comment -%} Table Body {%- endcomment -%}
                <tbody>
                  {%- assign row_count = 0 -%}
                  {%- for item in comparison_data -%}
                    {%- if item.feature_title != blank -%}
                      {%- assign row_count = row_count | plus: 1 -%}
                      {%- assign is_last_row = true -%}

                      {%- comment -%} Check if this is the last row {%- endcomment -%}
                      {%- for check_item in comparison_data -%}
                        {%- if check_item.feature_title != blank -%}
                          {%- assign temp_count = 0 -%}
                          {%- for count_item in comparison_data -%}
                            {%- if count_item.feature_title != blank -%}
                              {%- assign temp_count = temp_count | plus: 1 -%}
                              {%- if count_item == check_item and temp_count > row_count -%}
                                {%- assign is_last_row = false -%}
                                {%- break -%}
                              {%- endif -%}
                            {%- endif -%}
                          {%- endfor -%}
                        {%- endif -%}
                      {%- endfor -%}

                      <tr class='tw-border-none tw-p-0'>
                        {%- comment -%} Feature Title Column {%- endcomment -%}
                        <td class='tw-sticky tw-left-0 tw-z-10 tw-min-w-[100px] tw-border-t tw-border-[#CBD3D9] tw-bg-white tw-pr-[11px] tw-text-3xs xs:tw-text-2xs xl:tw-w-[285px] xl:tw-pr-[5px] xl:tw-text-base 2xl:tw-pr-4'>
                          {{ item.feature_title }}
                          {%- if item.feature_description != blank -%}
                            <div class='tw-text-xs tw-text-gray-500 tw-mt-1'>{{ item.feature_description }}</div>
                          {%- endif -%}
                        </td>

                        {%- comment -%} Our Brand Feature Column {%- endcomment -%}
                        <td
                          class='tw-sticky tw-left-[100px] tw-z-10 tw-border{% if section.settings.brand_column_border %} tw-border-x-{{ section.settings.brand_border_color | default: 'blue-500' }}{% endif %} tw-p-0{% if is_last_row and section.settings.brand_column_border %} tw-overflow-hidden tw-rounded-b-lg tw-border-b-{{ section.settings.brand_border_color | default: 'blue-500' }}{% endif %}'
                          style='background: {{ section.settings.highlight_color | default: '#F6F9FE' }};'
                        >
                          <div
                            class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center tw-text-3xs md:tw-min-w-[130px] md:tw-text-2xs'
                            style='background: {{ section.settings.highlight_color | default: '#F6F9FE' }};'
                          >
                            <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-[6px]'>
                              {%- if item.our_brand_feature_type == 'boolean' -%}
                                {%- if item.our_brand_feature -%}
                                  <svg
                                    width='23'
                                    height='20'
                                    viewBox='0 0 23 20'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.check_color | default: '#3369FF' }}" stroke-width="2.5" stroke-linecap="round"></path>
                                  </svg>
                                {%- else -%}
                                  <svg
                                    width='16'
                                    height='16'
                                    viewBox='0 0 16 15'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                  </svg>
                                {%- endif -%}
                              {%- elsif item.our_brand_feature_type == 'text' -%}
                                <div
                                  class='tw-mx-auto tw-w-9/12 tw-text-center'
                                  style='color: {{ section.settings.check_color | default: '#3369FF' }};'
                                >
                                  {{ item.our_brand_feature_text }}
                                </div>
                              {%- elsif item.our_brand_feature_type == 'price' -%}
                                {%- if item.our_brand_feature -%}
                                  <svg
                                    width='23'
                                    height='20'
                                    viewBox='0 0 23 20'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.check_color | default: '#3369FF' }}" stroke-width="2.5" stroke-linecap="round"></path>
                                  </svg>
                                {%- else -%}
                                  <svg
                                    width='16'
                                    height='16'
                                    viewBox='0 0 16 15'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                  </svg>
                                {%- endif -%}
                                {%- if item.our_brand_feature_price != blank -%}
                                  <div>{{ item.our_brand_feature_price }}</div>
                                {%- endif -%}
                              {%- else -%}
                                {%- comment -%} Default to boolean for backward compatibility {%- endcomment -%}
                                {%- if item.our_brand_feature -%}
                                  <svg
                                    width='23'
                                    height='20'
                                    viewBox='0 0 23 20'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.check_color | default: '#3369FF' }}" stroke-width="2.5" stroke-linecap="round"></path>
                                  </svg>
                                {%- else -%}
                                  <svg
                                    width='16'
                                    height='16'
                                    viewBox='0 0 16 15'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                  </svg>
                                {%- endif -%}
                              {%- endif -%}
                              {%- if item.our_brand_feature_note != blank -%}
                                <div class='tw-text-xs tw-text-gray-500'>{{ item.our_brand_feature_note }}</div>
                              {%- endif -%}
                            </div>
                          </div>
                        </td>

                        {%- comment -%} Competitor Feature Columns {%- endcomment -%}
                        {%- if competitor_1_title != blank -%}
                          <td class='tw-border-t tw-border-solid tw-p-0'>
                            <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center tw-text-3xs md:tw-min-w-[130px] md:tw-text-2xs'>
                              <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-[6px]'>
                                {%- if item.competitor_1_feature_type == 'boolean' -%}
                                  {%- if item.competitor_1_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                {%- elsif item.competitor_2_feature_type == 'text' -%}
                                  {{ item.competitor_2_feature_text }}
                                {%- elsif item.competitor_2_feature_type == 'price' -%}
                                  {%- if item.competitor_2_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                  {%- if item.competitor_2_feature_price != blank -%}
                                    <div>{{ item.competitor_2_feature_price }}</div>
                                  {%- endif -%}
                                {%- else -%}
                                  {%- if item.competitor_2_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                {%- endif -%}
                                {%- if item.competitor_2_feature_note != blank -%}
                                  <div class='tw-text-xs tw-text-gray-500'>{{ item.competitor_2_feature_note }}</div>
                                {%- endif -%}
                              </div>
                            </div>
                          </td>
                        {%- endif -%}

                        {%- if competitor_3_title != blank -%}
                          <td class='tw-border-t tw-border-solid tw-p-0'>
                            <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center tw-text-3xs md:tw-min-w-[130px] md:tw-text-2xs'>
                              <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-[6px]'>
                                {%- if item.competitor_3_feature_type == 'boolean'
                                  or item.competitor_3_feature_type == blank
                                -%}
                                  {%- if item.competitor_3_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                {%- elsif item.competitor_3_feature_type == 'text' -%}
                                  {{ item.competitor_3_feature_text }}
                                {%- elsif item.competitor_3_feature_type == 'price' -%}
                                  {%- if item.competitor_3_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                  {%- if item.competitor_3_feature_price != blank -%}
                                    <div>{{ item.competitor_3_feature_price }}</div>
                                  {%- endif -%}
                                {%- else -%}
                                  {%- if item.competitor_3_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                {%- endif -%}
                                {%- if item.competitor_3_feature_note != blank -%}
                                  <div class='tw-text-xs tw-text-gray-500'>{{ item.competitor_3_feature_note }}</div>
                                {%- endif -%}
                              </div>
                            </div>
                          </td>
                        {%- endif -%}

                        {%- if competitor_4_title != blank -%}
                          <td class='tw-border-t tw-border-solid tw-p-0'>
                            <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center tw-text-3xs md:tw-min-w-[130px] md:tw-text-2xs'>
                              <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-[6px]'>
                                {%- if item.competitor_4_feature_type == 'boolean' -%}
                                  {%- if item.competitor_4_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                {%- elsif item.competitor_4_feature_type == 'text' -%}
                                  {{ item.competitor_4_feature_text }}
                                {%- elsif item.competitor_4_feature_type == 'price' -%}
                                  {%- if item.competitor_4_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                  {%- if item.competitor_4_feature_price != blank -%}
                                    <div>{{ item.competitor_4_feature_price }}</div>
                                  {%- endif -%}
                                {%- else -%}
                                  {%- if item.competitor_4_feature -%}
                                    <svg
                                      width='23'
                                      height='20'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round"></path>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      width='16'
                                      height='16'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="#4D6E89" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                  {%- endif -%}
                                {%- endif -%}
                                {%- if item.competitor_4_feature_note != blank -%}
                                  <div class='tw-text-xs tw-text-gray-500'>{{ item.competitor_4_feature_note }}</div>
                                {%- endif -%}
                              </div>
                            </div>
                          </td>
                        {%- endif -%}
                      </tr>
                    {%- endif -%}
                  {%- endfor -%}
                </tbody>
              </table>
            </div>

            {%- comment -%} Footnotes {%- endcomment -%}
            {%- assign has_footnotes = false -%}
            {%- for item in comparison_data -%}
              {%- if item.footnote != blank -%}
                {%- assign has_footnotes = true -%}
                {%- break -%}
              {%- endif -%}
            {%- endfor -%}

            {%- if has_footnotes -%}
              <div class='comparison-scroll-container tw-overflow-x-auto tw-mx-auto xl:tw-max-w-[1080px] 2xl:tw-max-w-[1125px] tw-px-4'>
                {%- for item in comparison_data -%}
                  {%- if item.footnote != blank -%}
                    <p class='comparison-footnote'>{{ item.footnote }}</p>
                  {%- endif -%}
                {%- endfor -%}
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "Product Comparison Table",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        {
          "label": "Left",
          "value": "tw-text-left"
        },
        {
          "label": "Center",
          "value": "tw-text-center"
        },
        {
          "label": "Right",
          "value": "tw-text-right"
        }
      ],
      "default": "tw-text-center"
    },
    {
      "type": "header",
      "content": "Table Customization"
    },
    {
      "type": "color",
      "id": "highlight_color",
      "label": "Brand column highlight color",
      "default": "#F6F9FE"
    },
    {
      "type": "color",
      "id": "check_color",
      "label": "Check mark color",
      "default": "#3369FF"
    },
    {
      "type": "color",
      "id": "cross_color",
      "label": "Cross mark color",
      "default": "#4D6E89"
    },
    {
      "type": "checkbox",
      "id": "brand_column_border",
      "label": "Show brand column border",
      "default": true
    },
    {
      "type": "color",
      "id": "brand_border_color",
      "label": "Brand column border color",
      "default": "#3369FF"
    },
    {
      "type": "range",
      "id": "header_image_height",
      "min": 30,
      "max": 120,
      "step": 10,
      "unit": "px",
      "label": "Header image height",
      "default": 60
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "Product Comparison Table"
    }
  ]
}
{% endschema %}
