{%- style -%}
  .comparison-table-section {
    --section-padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    --brand-accent-color: {{ section.settings.brand_accent_color | default: '#6dab3c' }};
  }

  @media screen and (min-width: 750px) {
    .comparison-table-section {
      --section-padding-top: {{ section.settings.padding_top }}px;
      --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  /* Table base styles */
  .comparison-table {
    border-collapse: separate;
    border-spacing: 0;
  }

  /* Sticky feature column (first column) */
  .comparison-table th:first-child,
  .comparison-table td:first-child {
    position: sticky;
    left: 0;
    z-index: 10;
    background: white;
  }

  /* Sticky brand column (second column) - highlighted */
  .comparison-table th:nth-child(2),
  .comparison-table td:nth-child(2) {
    position: -webkit-sticky;
    position: sticky;
    left: 100px;
    z-index: 9;
    background: {{ section.settings.highlight_color | default: '#F6F9FE' }};
    box-sizing: border-box;
  }

  @media screen and (min-width: 1280px) {
    .comparison-table th:nth-child(2),
    .comparison-table td:nth-child(2) {
      left: 285px;
    }
  }

  /* Brand column border styling */
  .comparison-table th:nth-child(2) {
    border-top: 2px solid var(--brand-accent-color);
    border-left: 2px solid var(--brand-accent-color);
    border-right: 2px solid var(--brand-accent-color);
    border-top-left-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
  }

  .comparison-table tbody tr:first-child td:nth-child(2) {
    border-top: 1px solid #e5e7eb;
    border-left: 2px solid var(--brand-accent-color);
    border-right: 2px solid var(--brand-accent-color);
  }

  .comparison-table tbody tr:not(:first-child) td:nth-child(2) {
    border-top: 1px solid #e5e7eb;
    border-left: 2px solid var(--brand-accent-color);
    border-right: 2px solid var(--brand-accent-color);
  }

  .comparison-table tbody tr:last-child td:nth-child(2) {
    border-bottom: 2px solid var(--brand-accent-color);
    border-bottom-left-radius: 0.5rem;
    border-bottom-right-radius: 0.5rem;
  }

  /* Higher z-index for header sticky cells */
  .comparison-table th:first-child {
    z-index: 11;
  }

  .comparison-table th:nth-child(2) {
    z-index: 10;
  }

  /* Scroll container wrapper for gradient fade */
  .comparison-scroll-wrapper {
    position: relative;
  }

  /* Gradient fade on right edge for mobile - fixed to viewport */
  @media screen and (max-width: 1279px) {
    .comparison-scroll-wrapper::after {
      content: '';
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      width: 2.5rem;
      background: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1));
      pointer-events: none;
      z-index: 15;
    }
  }

  /* Scroll container */
  .comparison-scroll-container {
    position: relative;
    overflow-x: auto;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }

  .comparison-scroll-container::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  /* SVG Icons */
  .comparison-check-icon {
    width: 23px;
    height: 20px;
    display: inline-block;
  }

  .comparison-cross-icon {
    width: 16px;
    height: 16px;
    display: inline-block;
  }

  /* Brand column check icon color */
  .brand-column .comparison-check-icon path {
    stroke: var(--brand-accent-color);
  }

  /* Competitor column check/cross icon colors */
  .competitor-column .comparison-check-icon path {
    stroke: {{ section.settings.competitor_check_color}};
  }

  .competitor-column .comparison-cross-icon path {
    stroke: {{ section.settings.competitor_cross_color}};
  }

  /* Table cell styling with more breathing room */
  .comparison-table th {
    padding: 0.5rem 0.375rem;
  }

  .comparison-table td {
    min-height: 52px;
    padding: 0.75rem 0.5rem;
  }

  @media screen and (min-width: 768px) {
    .comparison-table th {
      padding: 0.75rem 0;
    }

    .comparison-table td {
      padding: 1rem 0.5rem;
    }
  }

  @media screen and (min-width: 1280px) {
    .comparison-table th {
      padding: 1rem 0;
    }

    .comparison-table td {
      padding: 1.25rem 1rem;
    }
  }

  /* Column widths */
  .comparison-table th:first-child,
  .comparison-table td:first-child {
    min-width: 100px;
  }

  .comparison-table th:nth-child(2),
  .comparison-table td:nth-child(2) {
    min-width: 82px;
  }

  .comparison-table th:not(:first-child):not(:nth-child(2)),
  .comparison-table td:not(:first-child):not(:nth-child(2)) {
    min-width: 82px;
  }

  @media screen and (min-width: 768px) {
    .comparison-table th:nth-child(2),
    .comparison-table td:nth-child(2),
    .comparison-table th:not(:first-child):not(:nth-child(2)),
    .comparison-table td:not(:first-child):not(:nth-child(2)) {
      min-width: 130px;
    }
  }

  @media screen and (min-width: 1280px) {
    .comparison-table th:first-child,
    .comparison-table td:first-child {
      width: 285px;
    }
  }

  @media screen and (min-width: 1536px) {
    .comparison-table th:nth-child(2),
    .comparison-table td:nth-child(2),
    .comparison-table th:not(:first-child):not(:nth-child(2)),
    .comparison-table td:not(:first-child):not(:nth-child(2)) {
      width: 130px;
    }
  }

  /* Border styling */
  .comparison-table td:first-child {
    border-top: 1px solid #e5e7eb;
  }

  .comparison-table td:not(:first-child):not(:nth-child(2)) {
    border-top: 1px solid #e5e7eb;
  }

  /* Header image styling */
  .comparison-header-image {
    max-height: {{ section.settings.header_image_height }}px;
    max-width: 100px;
    width: auto;
    height: auto;
    object-fit: contain;
  }

  /* Footnotes styling */
  .comparison-footnotes {
    margin-top: 1.5rem;
  }

  .comparison-footnote {
    font-size: 1rem;
    line-height: 1.5;
    color: #6b7280;
    margin-bottom: 0.375rem;
  }

  @media screen and (min-width: 768px) {
    .comparison-footnote {
      font-size: 1.2rem;
    }
  }

  .comparison-footnote a {
    text-decoration: underline;
  }

  /* Text sizing responsive */

  .comparison-table-text-sm {
    font-size: 1.5rem;
  }

  @media screen and (max-width: 640px) {
    .comparison-table-text-sm {
      font-size: 1.1rem;
    }
  }

  @media screen and (max-width: 990px) {
    .comparison-table-text-sm {
      font-size: 1.3rem;
    }
  }

  /* Feature value text colors */
  .brand-column .feature-value-text {
    color: var(--brand-accent-color);
  }
{%- endstyle -%}

{%- liquid
  assign comparison_data = product.metafields.custom.comparison_table.value
  assign section_header = null
  assign table_header = null

  if comparison_data == blank
    assign show_section = false
  else
    assign show_section = true
  endif
-%}

{%- if show_section -%}
  {%- comment -%} Parse the comparison data {%- endcomment -%}
  {%- for item in comparison_data -%}
    {%- if item.header != blank or item.sub_paragraph != blank -%}
      {%- assign section_header = item -%}
    {%- elsif item.our_brand_name != blank -%}
      {%- assign table_header = item -%}
    {%- endif -%}
  {%- endfor -%}

  {%- liquid
    assign competitor_1_title = table_header.competitor_1_title
    assign competitor_2_title = table_header.competitor_2_title
    assign competitor_3_title = table_header.competitor_3_title
    assign competitor_4_title = table_header.competitor_4_title

    assign total_columns = 2
    if competitor_1_title != blank
      assign total_columns = total_columns | plus: 1
    endif
    if competitor_2_title != blank
      assign total_columns = total_columns | plus: 1
    endif
    if competitor_3_title != blank
      assign total_columns = total_columns | plus: 1
    endif
    if competitor_4_title != blank
      assign total_columns = total_columns | plus: 1
    endif
  -%}

  <div class='comparison-table-section color-{{ section.settings.color_scheme }} gradient'>
    <div
      class='section-padding'
      style='padding-top: var(--section-padding-top); padding-bottom: var(--section-padding-bottom);'
    >
      {%- liquid
        case section.settings.section_content_width
          when 'full_width'
            assign container_class = 'tw-w-full tw-px-4'
          when 'page_width'
            assign container_class = 'page-width'
          when 'narrow'
            assign container_class = 'tw-max-w-4xl tw-mx-auto tw-px-4'
        endcase
      -%}

      <div class='{{ container_class }}'>
        {%- comment -%} Section Header {%- endcomment -%}
        {%- if section_header -%}
          <div class='tw-mb-6 lg:tw-mb-9 tw-flex tw-flex-col tw-gap-2 tw-items-center {{ section.settings.header_alignment }}'>
            {%- if section_header.header != blank -%}
              <h2 class='tw-text-3xl lg:tw-text-4xl tw-font-bold'>
                {{ section_header.header }}
              </h2>
            {%- endif -%}
            {%- if section_header.sub_paragraph != blank -%}
              <div class='tw-text-base lg:tw-text-lg tw-text-gray-600 tw-max-w-3xl'>
                {{ section_header.sub_paragraph | metafield_tag }}
              </div>
            {%- endif -%}
          </div>
        {%- endif -%}

        {%- comment -%} Comparison Table Container {%- endcomment -%}
        <div class='tw-mx-auto xl:tw-max-w-[1080px] 2xl:tw-max-w-[1125px]'>
          <div class='comparison-scroll-wrapper'>
            <div class='comparison-scroll-container tw-ml-4 xl:tw-ml-0 xl:tw-mx-auto xl:tw-px-10 2xl:tw-px-0'>
              <table class='comparison-table tw-mb-6 tw-mx-auto'>
                {%- comment -%} Table Header {%- endcomment -%}
                <thead>
                  <tr class='tw-border-0 tw-p-0'>
                    <th class='tw-border-0 tw-p-0'></th>

                    {%- comment -%} Our Brand Column Header {%- endcomment -%}
                    <th class='tw-p-0 brand-column'>
                      <div class='tw-min-w-[82px] tw-px-1.5 tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                        <div class='tw-mx-auto tw-max-w-[100px]'>
                          {%- if table_header.our_brand_logo != blank -%}
                            {{
                              table_header.our_brand_logo
                              | image_url: width: 200
                              | image_tag:
                                class: 'comparison-header-image tw-mx-auto',
                                alt: table_header.our_brand_name,
                                loading: 'lazy'
                            }}
                          {%- elsif table_header.our_brand_name != blank -%}
                            <div class='tw-font-bold comparison-table-text-sm tw-text-center'>
                              {{ table_header.our_brand_name }}
                            </div>
                          {%- endif -%}
                          {%- if table_header.our_brand_subtitle != blank -%}
                            <div class='comparison-table-text-sm tw-text-center tw-mt-1'>
                              {{ table_header.our_brand_subtitle }}
                            </div>
                          {%- endif -%}
                        </div>
                      </div>
                    </th>

                    {%- comment -%} Competitor Column Headers {%- endcomment -%}
                    {%- if competitor_1_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-1.5 tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_1_logo != blank -%}
                              {{
                                table_header.competitor_1_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_1_title,
                                  loading: 'lazy'
                              }}
                            {%- elsif competitor_1_title != blank -%}
                              <div class='tw-font-bold comparison-table-text-sm tw-text-center'>
                                {{ competitor_1_title }}
                              </div>
                            {%- endif -%}
                            {%- if table_header.competitor_1_subtitle != blank -%}
                              <div class='comparison-table-text-sm tw-text-center tw-mt-1'>
                                {{ table_header.competitor_1_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}

                    {%- if competitor_2_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-1.5 tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_2_logo != blank -%}
                              {{
                                table_header.competitor_2_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_2_title,
                                  loading: 'lazy'
                              }}
                            {%- elsif competitor_2_title != blank -%}
                              <div class='tw-font-bold comparison-table-text-sm tw-text-center'>
                                {{ competitor_2_title }}
                              </div>
                            {%- endif -%}
                            {%- if table_header.competitor_2_subtitle != blank -%}
                              <div class='comparison-table-text-sm tw-text-center tw-mt-1'>
                                {{ table_header.competitor_2_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}

                    {%- if competitor_3_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-1.5 tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_3_logo != blank -%}
                              {{
                                table_header.competitor_3_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_3_title,
                                  loading: 'lazy'
                              }}
                            {%- elsif competitor_3_title != blank -%}
                              <div class='tw-font-bold comparison-table-text-sm tw-text-center'>
                                {{ competitor_3_title }}
                              </div>
                            {%- endif -%}
                            {%- if table_header.competitor_3_subtitle != blank -%}
                              <div class='comparison-table-text-sm tw-text-center tw-mt-1'>
                                {{ table_header.competitor_3_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}

                    {%- if competitor_4_title != blank -%}
                      <th class='tw-p-0'>
                        <div class='tw-min-w-[82px] tw-px-1.5 tw-py-2 md:tw-px-0 xl:tw-py-3 2xl:tw-w-[130px]'>
                          <div class='tw-mx-auto tw-max-w-[100px]'>
                            {%- if table_header.competitor_4_logo != blank -%}
                              {{
                                table_header.competitor_4_logo
                                | image_url: width: 200
                                | image_tag:
                                  class: 'comparison-header-image tw-mx-auto',
                                  alt: competitor_4_title,
                                  loading: 'lazy'
                              }}
                            {%- elsif competitor_4_title != blank -%}
                              <div class='tw-font-bold comparison-table-text-sm tw-text-center'>
                                {{ competitor_4_title }}
                              </div>
                            {%- endif -%}
                            {%- if table_header.competitor_4_subtitle != blank -%}
                              <div class='comparison-table-text-sm tw-text-center tw-mt-1'>
                                {{ table_header.competitor_4_subtitle }}
                              </div>
                            {%- endif -%}
                          </div>
                        </div>
                      </th>
                    {%- endif -%}
                  </tr>
                </thead>

                {%- comment -%} Table Body {%- endcomment -%}
                <tbody>
                  {%- for item in comparison_data -%}
                    {%- if item.feature_title != blank -%}
                      <tr class='tw-border-none tw-p-0'>
                        {%- comment -%} Feature Title {%- endcomment -%}
                        <td class='tw-sticky tw-left-0 tw-z-10 tw-min-w-[100px] tw-pr-3 comparison-table-text-sm xl:tw-w-[285px] xl:tw-pr-1 2xl:tw-pr-4'>
                          {{ item.feature_title }}
                        </td>

                        {%- comment -%} Our Brand Feature {%- endcomment -%}
                        <td class='tw-p-0 brand-column'>
                          <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center md:tw-min-w-[130px] md:comparison-table-text-sm'>
                            <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-1.5'>
                              {%- if item.our_brand_feature_type == 'boolean' -%}
                                {%- if item.our_brand_feature -%}
                                  <svg
                                    class='comparison-check-icon'
                                    viewBox='0 0 23 20'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.brand_accent_color}}" stroke-width="2.5" stroke-linecap="round"/>
                                  </svg>
                                {%- else -%}
                                  <svg
                                    class='comparison-cross-icon'
                                    viewBox='0 0 16 15'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                  </svg>
                                {%- endif -%}
                              {%- elsif item.our_brand_feature_type == 'text' -%}
                                <div class='tw-mx-auto tw-w-9/12 tw-text-center feature-value-text'>
                                  {{ item.our_brand_feature_text }}
                                </div>
                              {%- elsif item.our_brand_feature_type == 'price' -%}
                                <svg
                                  class='comparison-check-icon'
                                  viewBox='0 0 23 20'
                                  fill='none'
                                  xmlns='http://www.w3.org/2000/svg'
                                >
                                  <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.brand_accent_color}}" stroke-width="2.5" stroke-linecap="round"/>
                                </svg>
                                <div class='feature-value-text'>{{ item.our_brand_feature_price }}</div>
                              {%- else -%}
                                {%- if item.our_brand_feature -%}
                                  <svg
                                    class='comparison-check-icon'
                                    viewBox='0 0 23 20'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.brand_accent_color}}" stroke-width="2.5" stroke-linecap="round"/>
                                  </svg>
                                {%- else -%}
                                  <svg
                                    class='comparison-cross-icon'
                                    viewBox='0 0 16 15'
                                    fill='none'
                                    xmlns='http://www.w3.org/2000/svg'
                                  >
                                    <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                  </svg>
                                {%- endif -%}
                              {%- endif -%}
                              {%- if item.our_brand_feature_note != blank -%}
                                <div class='tw-text-xs'>{{ item.our_brand_feature_note }}</div>
                              {%- endif -%}
                            </div>
                          </div>
                        </td>

                        {%- comment -%} Competitor 1 Feature {%- endcomment -%}
                        {%- if competitor_1_title != blank -%}
                          <td class='tw-p-0 competitor-column'>
                            <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center md:tw-min-w-[130px] md:comparison-table-text-sm'>
                              <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-1.5'>
                                {%- if item.competitor_1_feature_type == 'boolean' -%}
                                  {%- if item.competitor_1_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- elsif item.competitor_1_feature_type == 'text' -%}
                                  <div class='tw-mx-auto tw-w-9/12 tw-text-center'>
                                    {{ item.competitor_1_feature_text }}
                                  </div>
                                {%- elsif item.competitor_1_feature_type == 'price' -%}
                                  {%- if item.competitor_1_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                  <div>{{ item.competitor_1_feature_price }}</div>
                                {%- else -%}
                                  {%- if item.competitor_1_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- endif -%}
                                {%- if item.competitor_1_feature_note != blank -%}
                                  <div>{{ item.competitor_1_feature_note }}</div>
                                {%- endif -%}
                              </div>
                            </div>
                          </td>
                        {%- endif -%}

                        {%- comment -%} Competitor 2 Feature {%- endcomment -%}
                        {%- if competitor_2_title != blank -%}
                          <td class='tw-p-0 competitor-column'>
                            <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center md:tw-min-w-[130px] md:comparison-table-text-sm'>
                              <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-1.5'>
                                {%- if item.competitor_2_feature_type == 'boolean' -%}
                                  {%- if item.competitor_2_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- elsif item.competitor_2_feature_type == 'text' -%}
                                  <div class='tw-mx-auto tw-w-9/12 tw-text-center'>
                                    {{ item.competitor_2_feature_text }}
                                  </div>
                                {%- elsif item.competitor_2_feature_type == 'price' -%}
                                  {%- if item.competitor_2_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                  <div>{{ item.competitor_2_feature_price }}</div>
                                {%- else -%}
                                  {%- if item.competitor_2_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- endif -%}
                                {%- if item.competitor_2_feature_note != blank -%}
                                  <div>{{ item.competitor_2_feature_note }}</div>
                                {%- endif -%}
                              </div>
                            </div>
                          </td>
                        {%- endif -%}

                        {%- comment -%} Competitor 3 Feature {%- endcomment -%}
                        {%- if competitor_3_title != blank -%}
                          <td class='tw-p-0 competitor-column'>
                            <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center md:tw-min-w-[130px] md:comparison-table-text-sm'>
                              <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-1.5'>
                                {%- if item.competitor_3_feature_type == 'boolean' -%}
                                  {%- if item.competitor_3_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- elsif item.competitor_3_feature_type == 'text' -%}
                                  <div class='tw-mx-auto tw-w-9/12 tw-text-center'>
                                    {{ item.competitor_3_feature_text }}
                                  </div>
                                {%- elsif item.competitor_3_feature_type == 'price' -%}
                                  {%- if item.competitor_3_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                  <div>{{ item.competitor_3_feature_price }}</div>
                                {%- else -%}
                                  {%- if item.competitor_3_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- endif -%}
                                {%- if item.competitor_3_feature_note != blank -%}
                                  <div>{{ item.competitor_3_feature_note }}</div>
                                {%- endif -%}
                              </div>
                            </div>
                          </td>
                        {%- endif -%}

                        {%- comment -%} Competitor 4 Feature {%- endcomment -%}
                        {%- if competitor_4_title != blank -%}
                          <td class='tw-p-0 competitor-column'>
                            <div class='tw-flex tw-min-h-[52px] tw-min-w-[82px] tw-items-center tw-justify-center md:tw-min-w-[130px] md:comparison-table-text-sm'>
                              <div class='tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-y-1 tw-py-1.5'>
                                {%- if item.competitor_4_feature_type == 'boolean' -%}
                                  {%- if item.competitor_4_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- elsif item.competitor_4_feature_type == 'text' -%}
                                  <div class='tw-mx-auto tw-w-9/12 tw-text-center'>
                                    {{ item.competitor_4_feature_text }}
                                  </div>
                                {%- elsif item.competitor_4_feature_type == 'price' -%}
                                  {%- if item.competitor_4_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                  <div>{{ item.competitor_4_feature_price }}</div>
                                {%- else -%}
                                  {%- if item.competitor_4_feature -%}
                                    <svg
                                      class='comparison-check-icon'
                                      viewBox='0 0 23 20'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2 8.5L9.125 15L21 2" stroke="{{ section.settings.competitor_check_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round"/>
                                    </svg>
                                  {%- else -%}
                                    <svg
                                      class='comparison-cross-icon'
                                      viewBox='0 0 16 15'
                                      fill='none'
                                      xmlns='http://www.w3.org/2000/svg'
                                    >
                                      <path d="M2.22852 13.2694L7.99775 7.50019M7.99775 7.50019L13.767 13.2694M7.99775 7.50019L2.22852 1.73096M7.99775 7.50019L13.767 1.73096" stroke="{{ section.settings.competitor_cross_color | default: '#4D6E89' }}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {%- endif -%}
                                {%- endif -%}
                                {%- if item.competitor_4_feature_note != blank -%}
                                  <div>{{ item.competitor_4_feature_note }}</div>
                                {%- endif -%}
                              </div>
                            </div>
                          </td>
                        {%- endif -%}
                      </tr>
                    {%- endif -%}
                  {%- endfor -%}
                </tbody>
              </table>
            </div>
          </div>

          {%- comment -%} Footnotes {%- endcomment -%}
          {%- assign has_footnotes = false -%}
          {%- for item in comparison_data -%}
            {%- if item.footnote != blank -%}
              {%- assign has_footnotes = true -%}
              {%- break -%}
            {%- endif -%}
          {%- endfor -%}

          {%- if has_footnotes -%}
            <div class='comparison-footnotes tw-ml-4 tw-overflow-x-scroll tw-pr-2 xl:tw-ml-0 xl:tw-mx-auto xl:tw-px-10 2xl:tw-px-0'>
              {%- for item in comparison_data -%}
                {%- if item.footnote != blank -%}
                  <p class='comparison-footnote lg:tw-text-center'>
                    {{ item.footnote }}
                  </p>
                {%- endif -%}
              {%- endfor -%}
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "Product Comparison Table",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "section_content_width",
      "label": "Section content width",
      "options": [
        {
          "label": "Full width",
          "value": "full_width"
        },
        {
          "label": "Page width",
          "value": "page_width"
        },
        {
          "label": "Narrow",
          "value": "narrow"
        }
      ],
      "default": "page_width"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        {
          "label": "Left",
          "value": "tw-text-left"
        },
        {
          "label": "Center",
          "value": "tw-text-center"
        },
        {
          "label": "Right",
          "value": "tw-text-right"
        }
      ],
      "default": "tw-text-center"
    },
    {
      "type": "header",
      "content": "Brand Column Styling"
    },
    {
      "type": "color",
      "id": "brand_accent_color",
      "label": "Brand accent color",
      "default": "#6dab3c",
      "info": "Main brand color used for borders, check marks, and text in your brand column"
    },
    {
      "type": "color",
      "id": "highlight_color",
      "label": "Brand column background color",
      "default": "#F6F9FE",
      "info": "Background color for your brand column"
    },
    {
      "type": "header",
      "content": "Competitor Column Styling"
    },
    {
      "type": "color",
      "id": "competitor_check_color",
      "label": "Competitor check mark color",
      "default": "#4D6E89",
      "info": "Color for check marks in competitor columns"
    },
    {
      "type": "color",
      "id": "competitor_cross_color",
      "label": "Competitor cross mark color",
      "default": "#4D6E89",
      "info": "Color for cross marks in competitor columns"
    },
    {
      "type": "header",
      "content": "Other Customization"
    },
    {
      "type": "text",
      "id": "features_column_title",
      "label": "Features column title",
      "default": "Features"
    },
    {
      "type": "range",
      "id": "header_image_height",
      "min": 30,
      "max": 120,
      "step": 10,
      "unit": "px",
      "label": "Header image height",
      "default": 60
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "Product Comparison Table"
    }
  ]
}
{% endschema %}
